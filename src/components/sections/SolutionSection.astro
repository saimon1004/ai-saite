---
import SectionHeading from "../common/SectionHeading.astro";
import { aiImpactLab } from "../../data/services";

const base = import.meta.env.BASE_URL;
const { pillars, modules, caseStudies, stats, topTools, outcomes, deptTrends, successFactors, strengths, pricing, steps, faq } = aiImpactLab;

const statIcons = [
  // Star - 総合満足度
  `<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>`,
  // Briefcase - 業務活用度
  `<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 013.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0" /></svg>`,
  // Light bulb - 分かりやすさ
  `<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" /></svg>`,
  // Academic cap - 適度な難易度
  `<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5" /></svg>`,
];

const statBarWidths = ["96%", "94%", "94%", "84%"];
---

<section id="solution" class="py-20 sm:py-28" data-particles>
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <SectionHeading titleEn="AI IMPACT LAB" titleJa="ソリューション" />
    <div class="text-center mt-4 mb-16">
      <p class="text-2xl sm:text-3xl font-black text-text-primary">
        {aiImpactLab.tagline}
      </p>
      <p class="text-base sm:text-lg text-text-primary/85 mt-6 max-w-2xl mx-auto leading-loose font-medium" set:html={aiImpactLab.description}>
      </p>
    </div>

    <!-- Why AI Reskilling: Two Pillars -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-2 text-center">
        WHY AI RESKILLING
      </h3>
      <p class="text-center text-text-secondary text-sm mb-8">
        AIリテラシーの向上は、現場力の強化と採用ブランディングの両方に寄与します。
      </p>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {pillars.map((pillar, pIdx) => (
          <div class="bg-surface rounded-2xl border border-border overflow-hidden">
            <div class:list={[
              "px-6 sm:px-8 py-5",
              pIdx === 0 ? "bg-navy text-white" : "bg-teal text-white",
            ]}>
              <p class="text-xs tracking-wider uppercase font-heading font-bold opacity-70">{pillar.subtitle}</p>
              <h4 class="text-xl sm:text-2xl font-black mt-1">{pillar.title}</h4>
            </div>
            <div class="px-6 sm:px-8 py-6 space-y-5">
              {pillar.points.map((point) => (
                <div class="flex items-start gap-3">
                  <svg class:list={["w-5 h-5 shrink-0 mt-0.5", pIdx === 0 ? "text-navy" : "text-teal"]} fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                  </svg>
                  <div>
                    <p class="text-sm font-bold text-text-primary">{point.metric}</p>
                    <p class="text-xs text-text-secondary mt-0.5">{point.description}</p>
                  </div>
                </div>
              ))}
            </div>
            <div class:list={[
              "mx-6 sm:mx-8 mb-6 px-4 py-3 rounded-lg text-center text-sm font-bold",
              pIdx === 0 ? "bg-navy/5 text-navy" : "bg-teal/5 text-teal",
            ]}>
              {pillar.outcome}
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Training Modules (enriched) -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-2 text-center">
        PROGRAM
      </h3>
      <p class="text-center text-text-secondary text-sm mb-8">
        思考・実行・創造・自動化の統合スキルを習得する4モジュール構成
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {modules.map((mod) => {
          // テーマカラーの薄い色（上部アクセント帯用）
          const accentLight = mod.overlayColor.replace(/[\d.]+\)$/, '0.15)');
          return (
            <div class="relative rounded-2xl overflow-hidden hover:shadow-card-hover transition-shadow duration-300 group">
              {/* 背景画像 */}
              <img
                src={`${base}${mod.image}`}
                alt=""
                aria-hidden="true"
                class="absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 brightness-110"
                loading="lazy"
              />

              {/* 明るい白系オーバーレイ */}
              <div
                class="absolute inset-0"
                style={`background: linear-gradient(to bottom, rgba(255,255,255,0.88), rgba(255,255,255,0.95));`}
                aria-hidden="true"
              />

              {/* テーマカラーの薄いアクセント帯（上部） */}
              <div
                class="absolute inset-x-0 top-0 h-1.5 rounded-t-2xl"
                style={`background: ${mod.overlayColor};`}
                aria-hidden="true"
              />

              {/* コンテンツ */}
              <div class="relative z-10 p-6 sm:p-8">
                <div class="flex items-start justify-between mb-4">
                  <div>
                    <span class="font-heading text-xs tracking-wider uppercase font-bold text-gray-500">{mod.subtitle}</span>
                    <h4 class="text-xl font-black text-gray-900 mt-1">
                      <span class="text-gray-300 mr-1">{mod.number}.</span>{mod.title}
                    </h4>
                  </div>
                </div>
                <p class="text-sm text-gray-600 leading-relaxed mb-5">
                  {mod.description}
                </p>
                {/* Learning points */}
                <div class="space-y-2 mb-5">
                  {mod.learns.map((item) => (
                    <div class="flex items-center gap-2">
                      <svg class="w-4 h-4 text-teal shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                      </svg>
                      <span class="text-sm font-semibold text-gray-800">{item}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </div>

    <!-- Case Studies -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-2 text-center">
        CASE STUDY
      </h3>
      <p class="text-center text-lg sm:text-xl font-bold text-text-primary mb-2">
        研修で実際にこんなものが作れます
      </p>
      <p class="text-center text-text-secondary text-sm mb-10 max-w-2xl mx-auto">
        Claude Codeを使えば、専門知識がなくても日本語の指示だけで本格的な成果物を現場で制作できます。
      </p>

      <div class="space-y-8">
        {caseStudies.map((cs) => (
          <div class="bg-surface rounded-2xl border border-border overflow-hidden">
            <!-- Header with gradient -->
            <div class={`bg-gradient-to-r ${cs.color} px-6 sm:px-10 py-6 sm:py-8`}>
              <div class="flex items-center gap-3 mb-2">
                <span class="font-heading text-xs tracking-wider uppercase font-bold text-white/60">
                  Case {cs.number}
                </span>
                <span class="text-xs font-medium bg-white/20 text-white px-2.5 py-0.5 rounded-full">
                  {cs.titleEn}
                </span>
              </div>
              <h4 class="text-2xl sm:text-3xl font-black text-white">
                {cs.titleJa}
              </h4>
            </div>

            {/* Code background + content */}
            <div class="relative px-6 sm:px-10 py-8 overflow-hidden">
              {/* Animated code background */}
              <div class="absolute inset-0 opacity-[0.09] pointer-events-none select-none overflow-hidden" aria-hidden="true">
                <pre class="font-mono text-[11px] leading-[1.6] text-navy whitespace-pre animate-code-scroll"><code>{`import { createApp } from 'vue'
const response = await fetch('/api/recruit')
const data = await response.json()

export default function RecruitPage() {
  const [jobs, setJobs] = useState([])
  useEffect(() => {
    fetchJobs().then(setJobs)
  }, [])
  return (
    <main className="container mx-auto">
      <Hero title="Join Our Team" />
      <JobList items={jobs} />
    </main>
  )
}

async function deploy(config) {
  const build = await exec('npm run build')
  await uploadToServer(build.output, {
    host: config.server,
    path: '/var/www/recruit',
  })
  console.log('Deployed successfully!')
}

const theme = {
  colors: { primary: '#0D0084', accent: '#00C9A7' },
  fonts: { heading: 'Inter', body: 'Noto Sans JP' },
}

router.get('/api/positions', async (req, res) => {
  const positions = await db.query('SELECT * FROM positions WHERE active = true')
  res.json({ data: positions })
})

import { createApp } from 'vue'
const response = await fetch('/api/recruit')
const data = await response.json()

export default function RecruitPage() {
  const [jobs, setJobs] = useState([])
  useEffect(() => {
    fetchJobs().then(setJobs)
  }, [])
  return (
    <main className="container mx-auto">
      <Hero title="Join Our Team" />
      <JobList items={jobs} />
    </main>
  )
}`}</code></pre>
              </div>

              <div class="relative z-10">
                {/* Description + Image */}
                <div class="flex flex-col lg:flex-row gap-6 mb-6">
                  <!-- Left: Site image -->
                  <div class="lg:w-1/3 shrink-0">
                    <div class="rounded-xl overflow-hidden shadow-sm border border-border">
                      <img
                        src={`${base}case-site-image.jpg`}
                        alt="サイト完成イメージ"
                        class="w-full h-auto object-cover"
                        loading="lazy"
                      />
                    </div>
                  </div>

                  <!-- Right: Description + Tools -->
                  <div class="flex-1 flex flex-col justify-center">
                    <p class="text-sm text-text-secondary leading-relaxed mb-4">
                      {cs.description}
                    </p>
                    <div class="flex flex-wrap gap-2">
                      {cs.tools.map((tool) => (
                        <span class="text-xs font-medium bg-navy/5 text-navy px-3 py-1.5 rounded-full">
                          {tool}
                        </span>
                      ))}
                    </div>
                  </div>
                </div>

                <!-- Steps -->
                <div class="mb-6">
                  <p class="text-xs font-heading tracking-wider uppercase font-bold text-text-secondary mb-4">
                    制作ステップ
                  </p>
                  <div class="grid grid-cols-1 sm:grid-cols-5 gap-3">
                    {cs.steps.map((step, sIdx) => (
                      <div class="flex sm:flex-col items-start sm:items-center gap-3 sm:gap-2 sm:text-center">
                        <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-navy text-white flex items-center justify-center shrink-0">
                          <span class="font-heading text-xs sm:text-sm font-black">{sIdx + 1}</span>
                        </div>
                        <div class="sm:text-center">
                          <p class="text-sm font-bold text-text-primary">{step.title}</p>
                          <p class="text-[11px] text-text-secondary mt-0.5 leading-snug">{step.description}</p>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                <!-- Highlights -->
                <div class="bg-teal/5 border border-teal/15 rounded-xl p-5">
                  <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                    {cs.highlights.map((hl) => (
                      <div class="flex items-start gap-2">
                        <svg class="w-4 h-4 text-teal shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                        </svg>
                        <span class="text-sm text-text-primary font-medium">{hl}</span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Interview */}
                {cs.interview && (
                  <div class="mt-6 bg-navy/5 rounded-xl p-6 sm:p-8">
                    <p class="font-heading text-xs tracking-wider uppercase font-bold text-teal mb-5">
                      Interview
                    </p>
                    <div class="flex flex-col sm:flex-row gap-6">
                      {/* Avatar */}
                      <div class="shrink-0 flex sm:flex-col items-center sm:items-center gap-4 sm:gap-2">
                        <div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full overflow-hidden bg-navy/10 flex items-center justify-center shrink-0">
                          <img
                            src={`${base}${cs.interview.image}`}
                            alt={cs.interview.name}
                            class="w-full h-full object-cover"
                            loading="lazy"
                            onerror="this.style.display='none';this.parentElement.innerHTML='<svg class=\'w-8 h-8 text-navy/30\' fill=\'none\' viewBox=\'0 0 24 24\' stroke=\'currentColor\' stroke-width=\'1.5\'><path stroke-linecap=\'round\' stroke-linejoin=\'round\' d=\'M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z\' /></svg>'"
                          />
                        </div>
                        <div class="sm:text-center">
                          <p class="text-sm font-bold text-text-primary">{cs.interview.name}</p>
                          <p class="text-[11px] text-text-secondary leading-tight mt-0.5">{cs.interview.company}</p>
                          {cs.interview.role && <p class="text-[11px] text-text-secondary leading-tight">{cs.interview.role}</p>}
                        </div>
                      </div>

                      {/* Quote */}
                      <div class="flex-1 relative">
                        <span class="absolute -top-2 -left-1 text-5xl font-heading font-black text-teal/15 leading-none select-none" aria-hidden="true">"</span>
                        <p class="text-sm text-text-secondary leading-relaxed pl-6 sm:pl-8 pt-2">
                          {cs.interview.quote}
                        </p>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Results Report -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-2 text-center">
        RESULTS
      </h3>
      <p class="text-center text-lg sm:text-xl font-bold text-text-primary mb-2">
        3日間・計11時間の研修レポート
      </p>
      <p class="text-center text-text-secondary text-sm mb-10">
        受講者アンケートで全項目が高評価。「すぐに業務で活かせる」との声を多数いただいています。
      </p>

      <!-- Satisfaction scores with icons + bars -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
        {stats.map((stat, sIdx) => (
          <div class="bg-surface rounded-2xl border border-border p-6">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-12 h-12 rounded-xl bg-navy/5 flex items-center justify-center text-navy shrink-0">
                <Fragment set:html={statIcons[sIdx]} />
              </div>
              <div>
                <p class="text-sm font-bold text-text-primary">{stat.label}</p>
                {stat.subtext && (
                  <p class="text-[11px] text-text-secondary">{stat.subtext}</p>
                )}
              </div>
            </div>
            <p class="text-4xl font-black text-navy mb-2">{stat.value}</p>
            <div class="w-full bg-navy/5 rounded-full h-2">
              <div class="bg-navy rounded-full h-2 transition-all duration-1000" style={`width: ${statBarWidths[sIdx]}`}></div>
            </div>
          </div>
        ))}
      </div>

      <!-- Success Factors strip -->
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-8">
        {successFactors.map((factor) => (
          <div class="bg-teal/5 border border-teal/15 rounded-xl px-4 py-3 text-center">
            <p class="text-sm font-bold text-teal">{factor.title}</p>
            <p class="text-xs text-text-secondary mt-0.5">{factor.detail}</p>
          </div>
        ))}
      </div>

      <!-- 3-column: Top tools / Outcomes / Dept trends -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Top-rated tools -->
        <div class="bg-surface rounded-2xl border border-border p-6 sm:p-8">
          <div class="flex items-center gap-2 mb-6">
            <div class="w-8 h-8 rounded-lg bg-yellow-50 flex items-center justify-center">
              <svg class="w-5 h-5 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M18.75 4.236c.982.143 1.954.317 2.916.52A6.003 6.003 0 0016.27 9.728M18.75 4.236V4.5c0 2.108-.966 3.99-2.48 5.228m0 0a6.023 6.023 0 01-2.77.896m-5.48 0a6.023 6.023 0 002.77.896" />
              </svg>
            </div>
            <h4 class="font-heading text-sm font-bold text-text-primary">Top評価ツール</h4>
          </div>
          <div class="space-y-4">
            {topTools.map((tool, tIdx) => (
              <div class="flex items-start gap-3">
                <div class:list={[
                  "w-7 h-7 rounded-full flex items-center justify-center shrink-0 text-xs font-black text-white",
                  tIdx === 0 ? "bg-yellow-400" : tIdx === 1 ? "bg-gray-400" : tIdx === 2 ? "bg-amber-600" : "bg-navy/30",
                ]}>
                  {tIdx + 1}
                </div>
                <div>
                  <div class="flex items-center gap-2">
                    <p class="text-sm font-bold text-text-primary">{tool.name}</p>
                    <span class="text-[10px] font-bold bg-teal/10 text-teal px-2 py-0.5 rounded-full">{tool.badge}</span>
                  </div>
                  <p class="text-xs text-text-secondary mt-0.5">{tool.description}</p>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- Outcomes -->
        <div class="bg-navy rounded-2xl p-6 sm:p-8 text-white">
          <div class="flex items-center gap-2 mb-6">
            <div class="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center">
              <svg class="w-5 h-5 text-teal" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
              </svg>
            </div>
            <h4 class="font-heading text-sm font-bold text-white">得られた成果</h4>
          </div>
          <div class="space-y-4">
            {outcomes.map((outcome) => (
              <div class="flex items-start gap-3 bg-white/5 rounded-xl px-4 py-3">
                <svg class="w-5 h-5 text-teal shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24">
                  <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
                </svg>
                <p class="text-sm font-medium text-white/90">{outcome.text}</p>
              </div>
            ))}
          </div>
        </div>

        <!-- Department Trends -->
        <div class="bg-surface rounded-2xl border border-border p-6 sm:p-8">
          <div class="flex items-center gap-2 mb-6">
            <div class="w-8 h-8 rounded-lg bg-navy/5 flex items-center justify-center">
              <svg class="w-5 h-5 text-navy" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />
              </svg>
            </div>
            <h4 class="font-heading text-sm font-bold text-text-primary">部門別活用トレンド</h4>
          </div>
          <div class="space-y-4">
            {deptTrends.map((dept, dIdx) => (
              <div class="flex items-start gap-3">
                <div class:list={[
                  "shrink-0 w-2 h-2 rounded-full mt-1.5",
                  dIdx === 0 ? "bg-teal" : dIdx === 1 ? "bg-navy" : "bg-navy/40",
                ]} />
                <div>
                  <p class="text-sm font-bold text-text-primary">
                    {dept.dept}
                    {dIdx === 0 && <span class="text-[10px] font-bold bg-teal/10 text-teal px-1.5 py-0.5 rounded ml-1.5">最多</span>}
                  </p>
                  <p class="text-xs text-text-secondary mt-0.5">{dept.usecases}</p>
                </div>
              </div>
            ))}
          </div>
          <div class="mt-6 pt-4 border-t border-border">
            <p class="text-[11px] text-text-secondary text-center">
              ShumMake様 生成AI研修レポートより（2025年11月・受講者11名）
            </p>
          </div>
        </div>

      </div>
    </div>

    <!-- Strengths -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-6 text-center">
        WHY SAIMON
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {strengths.map((item, idx) => (
          <div class="bg-surface rounded-2xl border border-border p-8">
            <span class="font-heading text-4xl font-black text-navy/10 leading-none" aria-hidden="true">
              {String(idx + 1).padStart(2, "0")}
            </span>
            <h4 class="text-lg font-bold text-text-primary mt-3">{item.title}</h4>
            <p class="text-sm text-text-secondary mt-2 leading-relaxed">{item.description}</p>
          </div>
        ))}
      </div>
    </div>

    <!-- Pricing -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-6 text-center">
        PRICING
      </h3>
      <div class="bg-surface rounded-2xl border border-border p-8 sm:p-10 max-w-3xl mx-auto">
        <div class="flex flex-col sm:flex-row items-center justify-between gap-6 mb-8">
          <div>
            <p class="text-sm text-text-secondary">{pricing.hours}</p>
            <p class="text-4xl sm:text-5xl font-black text-navy mt-1">
              ¥{pricing.price}<span class="text-base font-bold text-text-secondary">{pricing.priceNote}</span>
            </p>
          </div>
          <div class="flex flex-col gap-2">
            {pricing.includes.map((item) => (
              <span class="flex items-center gap-2 text-sm text-text-primary">
                <svg class="w-4 h-4 text-teal shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
                {item}
              </span>
            ))}
          </div>
        </div>
        <div class="flex flex-wrap gap-3 mb-8">
          {pricing.features.map((feat) => (
            <span class="text-sm font-medium bg-navy/5 text-navy px-4 py-2 rounded-full">
              {feat}
            </span>
          ))}
        </div>
        <!-- Subsidy plan -->
        <div class="bg-teal/5 border border-teal/20 rounded-xl p-6">
          <p class="font-bold text-teal text-sm">{pricing.subsidy.label}</p>
          <p class="text-xs text-text-secondary mt-1">{pricing.subsidy.description}</p>
          <p class="text-2xl font-black text-navy mt-2">{pricing.subsidy.price}</p>
          <a
            href={`${base}subsidy-plan/`}
            class="inline-flex items-center gap-1 text-xs text-text-secondary hover:text-teal transition-colors duration-200 mt-3"
          >
            助成金を活用したい場合はこちら
            <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    </div>

    <!-- Steps -->
    <div class="mb-20">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-8 text-center">
        PROCESS
      </h3>
      <div class="flex flex-wrap justify-center items-start gap-3 sm:gap-4">
        {steps.map((step, idx) => (
          <div class="flex items-start gap-3">
            <div class="flex flex-col items-center text-center min-w-[100px] max-w-[140px]">
              <div class="w-12 h-12 rounded-full bg-navy text-white flex items-center justify-center mb-3">
                <span class="font-heading text-sm font-black">
                  {String(step.number).padStart(2, "0")}
                </span>
              </div>
              <span class="text-sm font-bold text-text-primary">{step.title}</span>
              <span class="text-[11px] text-text-secondary mt-1 leading-snug">{step.description}</span>
            </div>
            {idx < steps.length - 1 && (
              <div class="flex items-center pt-4 text-navy/20" aria-hidden="true">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>

    <!-- FAQ -->
    <div class="max-w-3xl mx-auto">
      <h3 class="font-heading text-sm tracking-wider text-teal uppercase font-bold mb-6 text-center">
        FAQ
      </h3>
      <div class="divide-y divide-border bg-surface rounded-2xl border border-border overflow-hidden">
        {faq.map((item) => (
          <details class="group">
            <summary class="flex items-center justify-between cursor-pointer px-6 sm:px-8 py-5 text-sm font-bold text-text-primary hover:text-navy transition-colors duration-200 list-none">
              <span>{item.question}</span>
              <svg class="w-4 h-4 text-text-secondary shrink-0 ml-4 transition-transform duration-200 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <p class="px-6 sm:px-8 pb-5 text-sm text-text-secondary leading-relaxed">
              {item.answer}
            </p>
          </details>
        ))}
      </div>
    </div>

  </div>
</section>
