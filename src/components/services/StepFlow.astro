---
interface Step {
  number: number;
  title: string;
  description: string;
}

interface Props {
  steps: Step[];
}

const { steps } = Astro.props;
---

<div class="relative">
  {steps.map((step, index) => {
    const isEven = index % 2 === 1;
    const isLast = index === steps.length - 1;
    const delay = index * 100;

    return (
      <div
        class="animate-fade-up relative"
        style={`transition-delay: ${delay}ms;`}
      >
        {/* Desktop: alternating layout */}
        <div class="hidden md:grid md:grid-cols-[1fr_auto_1fr] md:gap-8 md:items-start mb-12 last:mb-0">
          {/* Left content */}
          <div class:list={[
            "flex justify-end",
            isEven ? "order-3" : "order-1",
          ]}>
            <div class:list={[
              "max-w-sm",
              isEven ? "text-left" : "text-right",
            ]}>
              <h3 class="text-lg font-bold text-navy mb-2">{step.title}</h3>
              <p class="text-sm text-text-secondary leading-relaxed">{step.description}</p>
            </div>
          </div>

          {/* Center: number circle + connector */}
          <div class="order-2 flex flex-col items-center">
            <div class="w-12 h-12 rounded-full bg-navy text-white flex items-center justify-center text-lg font-bold shrink-0 relative z-10">
              {step.number}
            </div>
            {!isLast && (
              <div class="w-0.5 h-12 bg-navy/20 mt-2" aria-hidden="true" />
            )}
          </div>

          {/* Right content (empty on alternating) */}
          <div class:list={[
            isEven ? "order-1" : "order-3",
          ]} />
        </div>

        {/* Mobile: left-aligned layout */}
        <div class="md:hidden flex gap-4 mb-8 last:mb-0">
          <div class="flex flex-col items-center">
            <div class="w-10 h-10 rounded-full bg-navy text-white flex items-center justify-center text-sm font-bold shrink-0 relative z-10">
              {step.number}
            </div>
            {!isLast && (
              <div class="w-0.5 flex-1 bg-navy/20 mt-2" aria-hidden="true" />
            )}
          </div>
          <div class="pb-8">
            <h3 class="text-base font-bold text-navy mb-1">{step.title}</h3>
            <p class="text-sm text-text-secondary leading-relaxed">{step.description}</p>
          </div>
        </div>
      </div>
    );
  })}
</div>
