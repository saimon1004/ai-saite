---
const base = import.meta.env.BASE_URL;

const services = [
  {
    name: "採用定着プログラム",
    description: "採用は扉を開く。定着は未来を創る。",
    href: `${base}services/recruitment/`,
    icon: "people",
    gradient: "from-navy/5 to-teal/5",
  },
  {
    name: "AI IMPACT LAB",
    description: "実践的なAI研修で、組織を次世代へ導く",
    href: `${base}services/ai-impact-lab/`,
    icon: "brain",
    gradient: "from-teal/5 to-navy/5",
  },
  {
    name: "バックオフィス構築支援",
    description: "総務・データ管理・BCP策定をサポート",
    href: `${base}services/backoffice/`,
    icon: "building",
    gradient: "from-navy/5 to-teal/5",
  },
];
---

<section class="py-24 sm:py-32 bg-surface-dim">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section heading -->
    <div class="text-center mb-16 animate-fade-up" data-animate>
      <p class="text-teal text-sm font-bold tracking-[0.3em] uppercase mb-3">Services</p>
      <h2 class="text-3xl sm:text-4xl font-black text-text-primary">
        サービス
      </h2>
      <div class="mt-4 w-12 h-1 bg-teal mx-auto rounded-full"></div>
    </div>

    <!-- Bento grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 lg:grid-rows-2 gap-6 max-w-5xl mx-auto">
      {services.map((service, index) => (
        <a
          href={service.href}
          class:list={[
            "group relative rounded-[var(--radius-card)] p-8 sm:p-10 bg-surface border border-border overflow-hidden",
            "hover:shadow-card-hover hover:border-teal/30 transition-all duration-500",
            "animate-fade-up",
            index === 0 ? "lg:row-span-2" : "",
          ]}
          data-animate
          style={`transition-delay: ${0.1 + index * 0.1}s;`}
        >
          {/* Subtle gradient bg */}
          <div class={`absolute inset-0 bg-gradient-to-br ${service.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`} aria-hidden="true"></div>

          <div class:list={[
            "relative z-10 flex flex-col h-full",
            index === 0 ? "justify-between lg:min-h-[320px]" : "",
          ]}>
            {/* Icon */}
            <div class="w-12 h-12 flex items-center justify-center rounded-xl bg-navy/5 text-navy mb-6 group-hover:bg-navy group-hover:text-white transition-colors duration-300">
              {service.icon === "people" && (
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                </svg>
              )}
              {service.icon === "brain" && (
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                </svg>
              )}
              {service.icon === "building" && (
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21" />
                </svg>
              )}
            </div>

            {/* Content */}
            <div>
              <h3 class="text-xl sm:text-2xl font-black text-text-primary mb-3 group-hover:text-navy transition-colors duration-300">
                {service.name}
              </h3>
              <p class="text-text-secondary text-sm sm:text-base leading-relaxed mb-6">
                {service.description}
              </p>
            </div>

            {/* Link indicator */}
            <div class="flex items-center gap-1 text-navy font-bold text-sm mt-auto">
              <span>詳しく見る</span>
              <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>

<script>
  const serviceElements = document.querySelectorAll<HTMLElement>('.bg-surface-dim [data-animate]');
  if (serviceElements.length > 0) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-visible');
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );
    serviceElements.forEach((el) => observer.observe(el));
  }
</script>
