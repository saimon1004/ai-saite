---
import { company } from "../../data/company";

const base = import.meta.env.BASE_URL;

const infoItems = [
  { label: "会社名", value: company.name },
  { label: "代表", value: company.ceo },
  { label: "設立", value: company.founded },
  { label: "所在地", value: `${company.postalCode} ${company.address}` },
  { label: "事業内容", value: company.business },
];
---

<section class="py-24 sm:py-32 bg-surface-dim">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section heading -->
    <div class="text-center mb-16 animate-fade-up" data-animate>
      <p class="text-teal text-sm font-bold tracking-[0.3em] uppercase mb-3">Company</p>
      <h2 class="text-3xl sm:text-4xl font-black text-text-primary">
        会社概要
      </h2>
      <div class="mt-4 w-12 h-1 bg-teal mx-auto rounded-full"></div>
    </div>

    <!-- Company info table -->
    <div class="max-w-3xl mx-auto animate-fade-up" data-animate style="transition-delay: 0.1s;">
      <div class="bg-surface rounded-[var(--radius-card)] border border-border overflow-hidden shadow-card">
        <dl class="divide-y divide-border">
          {infoItems.map((item) => (
            <div class="grid grid-cols-1 sm:grid-cols-[160px_1fr] gap-1 sm:gap-0">
              <dt class="px-6 pt-5 sm:py-5 text-sm font-bold text-text-secondary">
                {item.label}
              </dt>
              <dd class="px-6 pb-5 sm:py-5 text-base text-text-primary">
                {item.value}
              </dd>
            </div>
          ))}
        </dl>
      </div>

      <!-- Link to full company page -->
      <div class="text-center mt-10 animate-fade-up" data-animate style="transition-delay: 0.2s;">
        <a
          href={`${base}company/`}
          class="inline-flex items-center gap-2 text-navy font-bold hover:text-teal transition-colors duration-200 group"
        >
          詳しく見る
          <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  const companyElements = document.querySelectorAll<HTMLElement>('section:last-of-type [data-animate]');
  if (companyElements.length > 0) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-visible');
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );
    companyElements.forEach((el) => observer.observe(el));
  }
</script>
